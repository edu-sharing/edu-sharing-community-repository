<metadataset id="default" label="default" hidden="false">
  <name>Core Metadataset</name>
  <i18n>mds</i18n>
  <widgets>
    <widget>
      <id>cm:name</id>
      <id rel="graphql">info.filename</id>
      <caption>cm_name</caption>
      <placeholder>cm_name_placeholder</placeholder>
      <bottomCaption>cm_name_bottom</bottomCaption>
      <type>text</type>
      <required>true</required>
      <!-- <condition>!ccm:wwwurl</condition>  -->
    </widget>
    <widget>
      <id>cclom:title</id>
      <id rel="graphql">lom.general.title</id>
      <caption>cm_title</caption>
      <placeholder>cm_title_placeholder</placeholder>
      <bottomCaption>cm_title_bottom</bottomCaption>
      <type>text</type>
      <hideIfEmpty>true</hideIfEmpty>
      <condition type="PROPERTY" negate="true">ccm:wwwurl</condition>
    </widget>
    <widget>
      <id>cclom:title</id>
      <id rel="graphql">lom.general.title</id>
      <caption>cm_title_wwwurl</caption>
      <placeholder>cm_title_placeholder</placeholder>
      <type>text</type>
      <condition type="PROPERTY">ccm:wwwurl</condition>
    </widget>
    <widget>
      <id>virtual:mediatype</id>
      <id rel="graphql">content.mediatype</id>
      <caption>virtual_mediatype</caption>
      <type>text</type>
      <hideIfEmpty>false</hideIfEmpty>
      <required>true</required>
      <!-- <condition>!ccm:wwwurl</condition>  -->
    </widget>
    <widget>
      <id>ccm:wwwurl</id>
      <id rel="graphql">info.url</id>
      <caption>cm_wwwurl</caption>
      <placeholder>cm_wwwurl_placeholder</placeholder>
      <type>text</type>
      <required>true</required>
      <condition type="PROPERTY">ccm:wwwurl</condition>
    </widget>
    <widget>
      <id>cclom:general_description</id>
      <id rel="graphql">lom.general.description</id>
      <type>textarea</type>
      <caption>lom_prop_educational_description</caption>
      <placeholder>lom_prop_educational_description_placeholder</placeholder>
      <hideIfEmpty>true</hideIfEmpty>
    </widget>
    <widget>
      <id>cm:description</id>
      <id rel="graphql">lom.general.description</id>
      <type>text</type>
      <caption>lom_prop_educational_description</caption>
      <placeholder>lom_prop_educational_description_placeholder</placeholder>
    </widget>
    <widget>
      <id>cclom:general_keyword</id>
      <id rel="graphql">lom.general.keyword</id>
      <type>multivalueSuggestBadges</type>
      <caption>lom_prop_general_keyword</caption>
      <placeholder>lom_prop_general_keyword_placeholder</placeholder>
      <hideIfEmpty>true</hideIfEmpty>
      <searchable>true</searchable>
    </widget>
    <widget>
      <id>cclom:general_keyword</id>
      <id rel="graphql">lom.general.keyword</id>
      <type>multivalueSuggestBadges</type>
      <caption>lom_prop_general_keyword_tagcloud</caption>
      <template>search_suggestions</template>
    </widget>
    <widget>
      <id>cclom:general_keyword</id>
      <id rel="graphql">lom.general.keyword</id>
      <type>multivalueSuggestBadges</type>
      <caption>lom_prop_general_keyword</caption>
      <placeholder>lom_prop_general_keyword_placeholder_search</placeholder>
      <template>search</template>
    </widget>
    <widget>
      <id>ccm:author_freetext</id>
      <id rel="graphql">lom.rights.author</id>
      <type>textarea</type>
      <caption>lom_prop_author_freetext</caption>
      <hideIfEmpty>true</hideIfEmpty>
    </widget>
    <widget>
      <id>ccm:educationallearningresourcetype</id>
      <id rel="graphql">lom.educational.0.learningResourceType</id>
      <type>multivalueFixedBadges</type>
      <caption>lom_prop_educationallearningresourcetype</caption>
      <placeholder>lom_prop_educationallearningresourcetype_placeholder</placeholder>
      <hideIfEmpty>true</hideIfEmpty>
      <valuespace>valuespaces.xml</valuespace>
      <valuespace_i18n>valuespaces_i18n</valuespace_i18n>
      <valuespace_sort>caption</valuespace_sort>
      <searchable>true</searchable>
    </widget>
    <widget>
      <id>ccm:restricted_access</id>
      <id rel="graphql">lom.rights.restrictedAccess</id>
      <type>checkbox</type>
      <caption>cb_restricted_access</caption>
      <bottomCaption>cb_restricted_access_info</bottomCaption>
      <condition type="TOOLPERMISSION">TOOLPERMISSION_CONTROL_RESTRICTED_ACCESS</condition>
    </widget>

    <widget>
      <id>ccm:tool_category</id>
      <type>singleoption</type>
      <caption>cb_tool_category</caption>
      <valuespace>valuespaces.xml</valuespace>
      <valuespace_i18n>valuespaces_i18n</valuespace_i18n>
      <valuespace_i18n_prefix>tool_category_</valuespace_i18n_prefix>
    </widget>
    <widget>
      <id>ccm:tool_producer</id>
      <type>text</type>
      <caption>cb_tool_producer</caption>
      <placeholder>cb_tool_producer_placeholder</placeholder>
    </widget>
    <widget>
      <id>ccm:tool_instance_key</id>
      <type>text</type>
      <caption>cb_tool_instance_key</caption>
    </widget>
    <widget>
      <id>ccm:tool_instance_secret</id>
      <type>text</type>
      <caption>cb_tool_instance_secret</caption>
    </widget>
    <widget>
      <id>ccm:tool_instance_params</id>
      <type>textarea</type>
      <caption>cb_tool_instance_params</caption>
      <extended>true</extended>
    </widget>
    <widget>
      <id>ccm:tool_instance_license</id>
      <type>text</type>
      <caption>cb_tool_instance_license</caption>
      <extended>true</extended>
    </widget>
    <widget>
      <id>ccm:tool_instance_support_contact</id>
      <type>text</type>
      <caption>cb_tool_instance_support_contact</caption>
      <extended>true</extended>
    </widget>
    <widget>
      <id>ccm:tool_instance_support_mail</id>
      <type>email</type>
      <caption>cb_tool_instance_support_mail</caption>
      <extended>true</extended>
    </widget>
    <widget>
      <id>ccm:tool_instance_provider</id>
      <type>text</type>
      <required>true</required>
      <caption>cb_tool_instance_provider</caption>
    </widget>
    <widget>
      <id>ccm:tool_instance_provider_url</id>
      <type>text</type>
      <required>true</required>
      <caption>cb_tool_instance_provider_url</caption>
    </widget>
    <widget>
      <id>ccm:tool_instance_access</id>
      <type>singleoption</type>
      <caption>cb_tool_instance_access</caption>
      <valuespace>valuespaces.xml</valuespace>
      <valuespace_i18n>valuespaces_i18n</valuespace_i18n>
      <valuespace_i18n_prefix>tool_access_</valuespace_i18n_prefix>
      <extended>true</extended>
    </widget>
    <widget>
      <id>ccm:lifecyclecontributer_author</id>
      <id rel="graphql">lom.lifecycle.contribute</id>
      <filter rel="graphql">$.[?(@.role == "Author")]</filter>
      <role>Author</role>
      <caption>cb_contr_author</caption>
      <type>vcard</type>
      <icon>person</icon>
      <hideIfEmpty>true</hideIfEmpty>
    </widget>
    <widget>
      <id rel="graphql">lom.lifecycle.contribute</id>
      <id>ccm:lifecyclecontributer_publisher</id>
      <caption>cb_contr_publisher</caption>
      <type>vcard</type>
      <icon>person</icon>
      <hideIfEmpty>true</hideIfEmpty>
    </widget>
    <widget>
      <id rel="graphql">lom.lifecycle.contribute</id>
      <id>ccm:lifecyclecontributer_unknown</id>
      <caption>cb_contr_unknown</caption>
      <type>vcard</type>
      <icon>person</icon>
      <hideIfEmpty>true</hideIfEmpty>
    </widget>
    <widget>
      <id rel="graphql">lom.lifecycle.contribute</id>
      <id>ccm:lifecyclecontributer_initiator</id>
      <caption>cb_contr_initiator</caption>
      <type>vcard</type>
      <icon>person</icon>
      <hideIfEmpty>true</hideIfEmpty>
    </widget>
    <widget>
      <id rel="graphql">lom.lifecycle.contribute</id>
      <id>ccm:lifecyclecontributer_terminator</id>
      <caption>cb_contr_terminator</caption>
      <type>vcard</type>
      <icon>person</icon>
      <hideIfEmpty>true</hideIfEmpty>
    </widget>
    <widget>
      <id rel="graphql">lom.lifecycle.contribute</id>
      <id>ccm:lifecyclecontributer_validator</id>
      <caption>cb_contr_validator</caption>
      <type>vcard</type>
      <icon>person</icon>
      <hideIfEmpty>true</hideIfEmpty>
    </widget>
    <widget>
      <id rel="graphql">lom.lifecycle.contribute</id>
      <id>ccm:lifecyclecontributer_editor</id>
      <caption>cb_contr_editor</caption>
      <type>vcard</type>
      <icon>person</icon>
      <hideIfEmpty>true</hideIfEmpty>
    </widget>
    <widget>
      <id rel="graphql">lom.lifecycle.contribute</id>
      <id>ccm:lifecyclecontributer_graphical_designer</id>
      <caption>cb_contr_graphical_designer</caption>
      <type>vcard</type>
      <icon>person</icon>
      <hideIfEmpty>true</hideIfEmpty>
    </widget>
    <widget>
      <id rel="graphql">lom.lifecycle.contribute</id>
      <id>ccm:lifecyclecontributer_technical_implementer</id>
      <caption>cb_contr_technical_implementer</caption>
      <type>vcard</type>
      <icon>person</icon>
      <hideIfEmpty>true</hideIfEmpty>
    </widget>
    <widget>
      <id rel="graphql">lom.lifecycle.contribute</id>
      <id>ccm:lifecyclecontributer_content_provider</id>
      <caption>cb_contr_content_provider</caption>
      <type>vcard</type>
      <icon>person</icon>
      <hideIfEmpty>true</hideIfEmpty>
    </widget>
    <widget>
      <id rel="graphql">lom.lifecycle.contribute</id>
      <id>ccm:lifecyclecontributer_educational_validator</id>
      <caption>cb_contr_educational_validator</caption>
      <type>vcard</type>
      <icon>person</icon>
      <hideIfEmpty>true</hideIfEmpty>
    </widget>
    <widget>
      <id rel="graphql">lom.lifecycle.contribute</id>
      <id>ccm:lifecyclecontributer_script_writer</id>
      <caption>cb_contr_script_writer</caption>
      <type>vcard</type>
      <icon>person</icon>
      <hideIfEmpty>true</hideIfEmpty>
    </widget>
    <widget>
      <id rel="graphql">lom.lifecycle.contribute</id>
      <id>ccm:lifecyclecontributer_instructional_designer</id>
      <caption>cb_contr_instructional_designer</caption>
      <type>vcard</type>
      <icon>person</icon>
      <hideIfEmpty>true</hideIfEmpty>
    </widget>
    <widget>
      <id rel="graphql">lom.lifecycle.contribute</id>
      <id>ccm:lifecyclecontributer_subject_matter_expert</id>
      <caption>cb_contr_subject_matter_expert</caption>
      <type>vcard</type>
      <icon>person</icon>
      <hideIfEmpty>true</hideIfEmpty>
    </widget>
    <widget>
      <id rel="graphql">lom.lifecycle.contribute</id>
      <id>ccm:metadatacontributer_creator</id>
      <caption>cb_contr_creator</caption>
      <type>vcard</type>
      <icon>person</icon>
      <hideIfEmpty>true</hideIfEmpty>
    </widget>
    <widget>
      <id rel="graphql">lom.lifecycle.contribute</id>
      <id>ccm:metadatacontributer_validator</id>
      <caption>cb_contr_validator</caption>
      <type>vcard</type>
      <icon>person</icon>
      <hideIfEmpty>true</hideIfEmpty>
    </widget>
    <widget>
      <id rel="graphql">lom.lifecycle.contribute</id>
      <id>ccm:metadatacontributer_provider</id>
      <caption>cb_contr_provider</caption>
      <type>vcard</type>
      <icon>person</icon>
      <hideIfEmpty>true</hideIfEmpty>
    </widget>
    <widget>
      <id>cm:created</id>
      <id rel="graphql">info.createDate</id>
      <caption>cm_prop_created</caption>
      <type>date</type>
    </widget>
    <widget>
      <id>cm:modified</id>
      <id rel="graphql">info.modifiedDate</id>
      <caption>cm_prop_modified</caption>
      <type>date</type>
    </widget>
    <widget>
      <id>license</id>
      <caption>ccm_prop_io_license</caption>
      <type>license</type>
      <valuespace_i18n_prefix>license_info_</valuespace_i18n_prefix>
      <values>
        <entry description="description_OPEN">OPEN</entry>
        <entry description="description_CC_BY_OPEN">CC_BY_OPEN</entry>
        <entry description="description_CC_BY_RESTRICTED">CC_BY_RESTRICTED</entry>
        <entry description="description_COPYRIGHT_OTHERS">COPYRIGHT_OTHERS</entry>
        <!--
                <entry description="description_OER">OER</entry>
                <entry description="description_OPEN">OPEN</entry>
                <entry description="description_CC_BY_OPEN">CC_BY_OPEN</entry>
                <entry description="description_CC_BY_ALL">CC_BY_ALL</entry>
                <entry>CC_0</entry>
                <entry>PDM</entry>
                <entry>CC_BY</entry>
                <entry>CC_BY_SA</entry>
                <entry>CC_BY_ND</entry>
                <entry>CC_BY_NC</entry>
                <entry>CC_BY_NC_SA</entry>
                <entry>CC_BY_NC_ND</entry>
                 -->
      </values>
    </widget>
    <widget>
      <id>sys:node-uuid</id>
      <id rel="graphql">id</id>
      <caption>lom_prop_general_identifier</caption>
      <type>text</type>
    </widget>
    <widget>
      <id>cclom:size</id>
      <id rel="graphql">lom.technical.size</id>
      <caption>lom_prop_size</caption>
      <type>number</type>
      <format>bytes</format>
    </widget>
    <widget>
      <id>ccm:educationaltypicalagerange</id>
      <id rel="graphql">lom.educational.0.typicalAgeRangeNominal</id>
      <caption>lom_prop_educational_typicalagerange</caption>
      <type>range</type>
      <min>0</min>
      <max>99</max>
    </widget>
    <widget>
      <id>ccm:taxonid</id>
      <id rel="graphql">lom.classification.taxon</id>
      <caption>input_taxonentry</caption>
      <type>multivalueTree</type>
      <valuespace>eaf_discipline.xml</valuespace>
    </widget>
    <widget>
      <id>ccm:educationalcontext</id>
      <id rel="graphql">lom.educational.0.context</id>
      <caption>school_context_type_of_school</caption>
      <type>multivalueFixedBadges</type>
      <valuespace>context.xml</valuespace>
      <valuespace_i18n>valuespace_context_i18n</valuespace_i18n>
    </widget>
    <widget>
      <id>ccm:imported_object_appname</id>
      <id rel="graphql">importedObject.appName</id>
      <caption>lom_prop_imported_object_appname</caption>
      <type>text</type>
      <hideIfEmpty>true</hideIfEmpty>
    </widget>
    <widget>
      <id>add_to_stream_title</id>
      <caption>cb_add_to_stream_title</caption>
      <placeholder>cb_add_to_stream_title_placeholder</placeholder>
      <type>text</type>
      <required>true</required>
    </widget>
    <widget>
      <id>add_to_stream_description</id>
      <caption>cb_add_to_stream_description</caption>
      <placeholder>cb_add_to_stream_description_placeholder</placeholder>
      <type>text</type>
    </widget>
    <widget>
      <id>add_to_stream_priority</id>
      <caption>cb_add_to_stream_priority</caption>
      <min>1</min>
      <max>10</max>
      <defaultvalue>5</defaultvalue>
      <type>slider</type>
    </widget>
    <widget>
      <id>feedback_rating</id>
      <caption>feedback_rating</caption>
      <type>slider</type>
      <min>1</min>
      <max>5</max>
      <defaultvalue>3</defaultvalue>
      <required>true</required>
    </widget>
    <widget>
      <id>feedback_comment</id>
      <caption>feedback_comment</caption>
      <type>textarea</type>
      <required>true</required>
    </widget>
    <widget>
      <id>material_feedback</id>
      <type>material_feedback</type>
      <link>_BLANK</link>
      <icon>chat_bubble</icon>
      <hideIfEmpty>true</hideIfEmpty>
    </widget>
    <widget>
      <id>cclom:classification_keyword</id>
      <id rel="graphql">lom.classification.keyword</id>
      <type>multivalueFixedBadges</type>
      <caption>lom_prop_classification_keyword</caption>
      <placeholder>lom_prop_classification_keyword_placeholder</placeholder>
      <suggestionSource>Sql</suggestionSource>
      <suggestionQuery>select factual_term_ident, CASE WHEN factual_term_synonyms IS NULL THEN factual_term_value WHEN
        array_length(factual_term_synonyms,1) = 1 THEN format('%s (%s)',factual_term_value, factual_term_synonyms[1])
        ELSE format('%s (%s, %s)',factual_term_value, factual_term_synonyms[1], factual_term_synonyms[2]) END from
        edu_factual_term where (lower(factual_term_value) like ? OR lower(factual_term_synonyms[0]) like ? OR
        lower(factual_term_synonyms[1]) like ? OR lower(factual_term_ident) like ?) order by
        char_length(factual_term_value) limit 100
      </suggestionQuery>
      <suggestDisplayProperty>ccm:classification_keyword_display</suggestDisplayProperty>
      <textEscapingPolicy>all</textEscapingPolicy>
    </widget>
    <widget>
      <id>virtual:user_files</id>
      <caption>virtual_user_files</caption>
      <type>checkbox</type>
    </widget>
  </widgets>
  <templates>
    <template>
      <id>node_general</id>
      <caption>dialog_upload_tab_basic</caption>
      <icon>description</icon>
      <html><![CDATA[
			  <preview>
              <ccm:wwwurl>
              <cm:name>
              <cclom:title>
              <ccm:educationallearningresourcetype>
              <cclom:general_keyword>
              <cclom:general_description>
              <author>
              <license>
              <ccm:restricted_access>
              <version>
              <childobjects>
				]]></html>
    </template>
    <template>
      <id>node_general_simple</id>
      <caption>dialog_upload_tab_basic</caption>
      <icon>description</icon>
      <html><![CDATA[
              <ccm:educationallearningresourcetype>
              <cclom:general_keyword>
				]]></html>
    </template>
    <template>
      <id>node_general_bulk</id>
      <icon>description</icon>
      <html><![CDATA[
              <cclom:title>
              <ccm:educationallearningresourcetype>
              <cclom:general_keyword>
              <cclom:general_description>
				]]></html>
    </template>
    <template>
      <id>node_childobject</id>
      <caption>dialog_upload_tab_basic</caption>
      <icon>description</icon>
      <html><![CDATA[
			  <preview>
              <ccm:wwwurl>
              <cm:name>
              <cclom:title>
			  <ccm:educationallearningresourcetype>
              <author>
				]]></html>
    </template>
    <template>
      <id>node_general_template</id>
      <html><![CDATA[
			  <ccm:educationallearningresourcetype>
              <cclom:general_keyword>
              <cclom:general_description>
				]]></html>
    </template>
    <template>
      <id>saved_search_general</id>
      <caption>dialog_upload_tab_basic</caption>
      <icon>description</icon>
      <html><![CDATA[
              <cm:name>
              <cclom:title>
				]]></html>
    </template>
    <template>
      <id>node_map</id>
      <caption>dialog_upload_tab_basic</caption>
      <icon>description</icon>
      <html><![CDATA[
			  <preview>
              <cm:name caption="{{cm_name_map}}" placeholder="{{cm_name_map_placeholder}}">
              <maptemplate>
				]]></html>
    </template>
    <template>
      <id>node_map_ref</id>
      <caption>dialog_upload_tab_basic</caption>
      <icon>description</icon>
      <html><![CDATA[
              <cm:name caption="{{cm_name_map}}" placeholder="{{cm_name_map_placeholder}}">
				]]></html>
    </template>
    <template>
      <id>tool_definition</id>
      <caption></caption>
      <html><![CDATA[
				<div style="width:40%;float:left;padding-right:30px;min-height:130px;">
				  	<preview style="width:100%;">
		        </div>
		        <div style="padding-top:40px;width:60%;float:left;font-weight:bold;">
              		<cclom:title caption="{{cm_toolname}}" placeholder="{{cm_toolname_placeholder}}" bottomCaption="" icon="build">
              	</div>
              	<div style="width:100%;float:left;">
              		<cclom:general_description type="textarea" placeholder="{{lom_prop_tool_description_placeholder}}">
              		<div class="row">
	              		<div class="col s6"><ccm:tool_category></div>
	              		<div class="col s6"><ccm:tool_producer></div>
              		</div>
				]]></html>
    </template>
    <template>
      <id>tool_instance_general</id>
      <caption>dialog_upload_tab_tool_instance_general</caption>
      <icon>build</icon>
      <html><![CDATA[
				<cm:name caption="{{cm_toolinstancename}}" placeholder="{{cm_toolinstancename_placeholder}}" icon="" bottomCaption="">
				<div class="row">
					<div class="col s6"><ccm:tool_instance_key></div>
					<div class="col s6"><ccm:tool_instance_secret></div>
				</div>
				]]></html>
    </template>
    <template>
      <id>tool_instance_provider</id>
      <caption>dialog_upload_tab_tool_instance_provider</caption>
      <icon>group</icon>
      <html><![CDATA[
				<div class="row">
					<div class="col s6"><ccm:tool_instance_provider></div>
					<div class="col s6"><ccm:tool_instance_provider_url></div>
				</div>
				<div class="row">
					<div class="col s6"><ccm:tool_instance_provider_support_contact></div>
					<div class="col s6"><ccm:tool_instance_provider_support_mail></div>
				</div>
				]]></html>
    </template>
    <template>
      <id>tool_instance_extended</id>
      <caption>dialog_upload_tab_tool_instance_extended</caption>
      <icon>extension</icon>
      <html><![CDATA[
					<ccm:tool_instance_license>
					<ccm:tool_instance_access>
					<ccm:tool_instance_params>
				]]></html>
    </template>
    <template>
      <id>search</id>
      <html><![CDATA[
			  <ccm:educationallearningresourcetype>
              <cclom:general_keyword>
              <license>
				]]></html>
    </template>
    <template>
      <id>search_suggestions</id>
      <rel>suggestions</rel>
      <html><![CDATA[
				]]></html>
    </template>
    <template>
      <id>search_input</id>
      <rel>suggestions</rel>
      <html><![CDATA[
			  <ccm:educationallearningresourcetype>
              <cclom:general_keyword>
				]]></html>
    </template>
    <template>
      <id>node_general_render</id>
      <caption>dialog_upload_tab_basic</caption>
      <html><![CDATA[
              <cclom:title>
              <cm:name>
              <virtual:mediatype>
			  <ccm:educationallearningresourcetype>
              <cclom:general_description>
              <cclom:general_keyword>
              <cclom:size>
              <cm:created>
              <cm:modified>
				]]></html>
    </template>
    <template>
      <id>node_contributor_render</id>
      <caption>dialog_upload_tab_contributers</caption>
      <html><![CDATA[
				<license>
                <ccm:imported_object_appname>
                <ccm:author_freetext>
				<div class="mdsContributorGroup">
					<div id="mdsLifecyclecontributorsTitle" class="mdsContributorTitle">{{ cb_contr_material }}</div>
					<div id="mdsLifecyclecontributors">
	               		<ccm:lifecyclecontributer_author>
	               		<ccm:lifecyclecontributer_publisher>
	               		<ccm:lifecyclecontributer_unknown>
	               		<ccm:lifecyclecontributer_initiator>
	               		<ccm:lifecyclecontributer_terminator>
	               		<ccm:lifecyclecontributer_validator>
	               		<ccm:lifecyclecontributer_editor>
	               		<ccm:lifecyclecontributer_graphical_designer>
	               		<ccm:lifecyclecontributer_technical_implementer>
	               		<ccm:lifecyclecontributer_content_provider>
	               		<ccm:lifecyclecontributer_educational_validator>
	               		<ccm:lifecyclecontributer_script_writer>
	               		<ccm:lifecyclecontributer_instructional_designer>
	               		<ccm:lifecyclecontributer_subject_matter_expert>
               		</div>
               		<div id="mdsMetadatcontributorsTitle" class="mdsContributorTitle">{{ cb_contr_metadata }}</div>
               		<div id="mdsMetadatcontributors">
	               		<ccm:metadatacontributer_creator>
	               		<ccm:metadatacontributer_validator>
	               		<ccm:metadatacontributer_provider>
	               	</div>
               	</div>
               	<script>
               		function hideIfEmpty(toHide,isEmpty){
               			if(isEmpty.innerHTML.trim()==""){
               				toHide.style.display='none';
               			}
               		}
               		hideIfEmpty(document.getElementById("mdsLifecyclecontributorsTitle"),document.getElementById("mdsLifecyclecontributors"));
               		hideIfEmpty(document.getElementById("mdsMetadatcontributorsTitle"),document.getElementById("mdsMetadatcontributors"));
               	</script>
				]]></html>
    </template>
    <template>
      <id>node_contributor_text</id>
      <caption>dialog_upload_tab_contributers</caption>
      <html><![CDATA[
				<license>
                <ccm:imported_object_appname>
                <ccm:author_freetext>
				<ccm:lifecyclecontributer_author>
				<ccm:lifecyclecontributer_publisher>
				<ccm:lifecyclecontributer_unknown>
				<ccm:lifecyclecontributer_initiator>
				<ccm:lifecyclecontributer_terminator>
				<ccm:lifecyclecontributer_validator>
				<ccm:lifecyclecontributer_editor>
				<ccm:lifecyclecontributer_graphical_designer>
				<ccm:lifecyclecontributer_technical_implementer>
				<ccm:lifecyclecontributer_content_provider>
				<ccm:lifecyclecontributer_educational_validator>
				<ccm:lifecyclecontributer_script_writer>
				<ccm:lifecyclecontributer_instructional_designer>
				<ccm:lifecyclecontributer_subject_matter_expert>
				<ccm:metadatacontributer_creator>
				<ccm:metadatacontributer_validator>
				<ccm:metadatacontributer_provider>
				]]></html>
    </template>
    <template>
      <id>node_collections_render</id>
      <caption>dialog_upload_tab_collections</caption>
      <hideIfEmpty>true</hideIfEmpty>
      <html><![CDATA[
					<collections>
				]]></html>
    </template>
    <template>
      <id>node_relations_render</id>
      <caption>dialog_upload_tab_relations</caption>
      <hideIfEmpty>true</hideIfEmpty>
      <html><![CDATA[
					<nodeRelations>
				]]></html>
    </template>
    <template>
      <id>node_comments_render</id>
      <caption>dialog_upload_tab_comments</caption>
      <html><![CDATA[
				<comments>
				]]></html>
    </template>
    <template>
      <id>add_to_stream</id>
      <caption>dialog_add_to_stream</caption>
      <html><![CDATA[
					<add_to_stream_title>
					<add_to_stream_description>
					<cclom:general_keyword>
				]]>
      </html>
    </template>
    <template>
      <id>collection_editorial</id>
      <html><![CDATA[
					<ccm:educationaltypicalagerange>
					<ccm:taxonid>
					<ccm:educationalcontext>
					<cclom:general_keyword>
				]]></html>
    </template>
    <template>
      <id>material_feedback</id>
      <html><![CDATA[
					<style>
					.feedback_comment_container textarea{
						min-height:100px;
					}
					</style>

					<feedback_rating>
					<feedback_comment>
				]]></html>
    </template>
    <template>
      <id>collection_media_center</id>
      <caption>collection_media_center</caption>
      <html><![CDATA[
					<ccm:taxonid>
					<ccm:educationalcontext>
					<cclom:general_keyword>
				]]></html>
    </template>
    <template>
      <id>collection_sidebar</id>
      <html><![CDATA[
					<ccm:educationaltypicalagerange hideIfEmpty="true">
					<ccm:taxonid hideIfEmpty="true">
					<ccm:educationalcontext hideIfEmpty="true">
					<cclom:general_keyword hideIfEmpty="true">
					<cm:description>
				]]></html>
    </template>
    <template>
      <id>mediacenter_filter</id>
      <html><![CDATA[
				]]></html>
    </template>
    <template>
      <id>search_relation_node</id>
      <html><![CDATA[
				<virtual:user_files>
				]]></html>
    </template>
  </templates>
  <groups>
    <group>
      <id>io</id>
      <rendering>angular</rendering>
      <views>
        <view>node_general</view>
      </views>
    </group>
    <group>
      <id>io_simple</id>
      <rendering>angular</rendering>
      <views>
        <view>node_general_simple</view>
      </views>
    </group>
    <group>
      <id>io_template</id>
      <rendering>angular</rendering>
      <views>
        <view>node_general_template</view>
      </views>
    </group>
    <group>
      <id>io_bulk</id>
      <rendering>angular</rendering>
      <views>
        <view>node_general_bulk</view>
      </views>
    </group>
    <group>
      <id>io_childobject</id>
      <rendering>angular</rendering>
      <views>
        <view>node_childobject</view>
      </views>
    </group>
    <group>
      <id>collection_editorial</id>
      <rendering>angular</rendering>
      <views>
        <view>collection_editorial</view>
      </views>
    </group>
    <group>
      <id>collection_media_center</id>
      <views>
        <view>collection_media_center</view>
      </views>
    </group>
    <group>
      <id>saved_search</id>
      <rendering>angular</rendering>
      <views>
        <view>saved_search_general</view>
      </views>
    </group>
    <group>
      <id>tool_definition</id>
      <views>
        <view>tool_definition</view>
      </views>
    </group>
    <group>
      <id>tool_instance</id>
      <views>
        <view>tool_instance_general</view>
        <view>tool_instance_provider</view>
        <view>tool_instance_extended</view>
      </views>
    </group>
    <group>
      <id>io_render</id>
      <views>
        <view>node_general_render</view>
        <view>node_contributor_render</view>
        <view>node_collections_render</view>
        <view>node_relations_render</view>
        <view>node_comments_render</view>
      </views>
    </group>
    <group>
      <id>io_text</id>
      <views>
        <view>node_general_render</view>
        <view>node_contributor_text</view>
      </views>
    </group>
    <group>
      <id>io_render_inline</id>
      <views>
        <view>node_general_render</view>
        <view>node_contributor_render</view>
      </views>
    </group>
    <group>
      <id>map</id>
      <rendering>angular</rendering>
      <views>
        <view>node_map</view>
      </views>
    </group>
    <group>
      <id>search_relation_node</id>
      <rendering>angular</rendering>
      <views>
        <view>search_relation_node</view>
      </views>
    </group>
    <group>
      <id>map_ref</id>
      <rendering>angular</rendering>
      <views>
        <view>node_map_ref</view>
      </views>
    </group>
    <group>
      <id>ngsearch</id>
      <rendering>angular</rendering>
      <views>
        <view>search</view>
        <view>search_suggestions</view>
      </views>
    </group>
    <group>
      <id>search_input</id>
      <rendering>angular</rendering>
      <views>
        <view>search_input</view>
      </views>
    </group>
    <group>
      <id>add_to_stream</id>
      <views>
        <view>add_to_stream</view>
      </views>
    </group>
    <group>
      <id>material_feedback_view</id>
      <rendering>angular</rendering>
      <views>
        <view>material_feedback</view>
      </views>
    </group>
    <group>
      <id>material_feedback</id>
      <rendering>angular</rendering>
      <views>
        <view>material_feedback</view>
      </views>
    </group>
    <group>
      <id>collection_sidebar</id>
      <rendering>angular</rendering>
      <views>
        <view>collection_sidebar</view>
      </views>
    </group>
    <group>
      <id>mediacenter_filter</id>
      <rendering>angular</rendering>
      <views>
        <view>mediacenter_filter</view>
      </views>
    </group>
    <group>
      <id>search_relation_node</id>
      <rendering>angular</rendering>
      <views>
        <view>search_relation_node</view>
      </views>
    </group>
  </groups>
  <sorts>
    <sort>
      <id>search</id>
      <default>
        <sortBy>score</sortBy>
        <sortAscending>false</sortAscending>
      </default>
      <columns>
        <column mode="descending">score</column>
        <column>cm:modified</column>
        <!-- currently not working (solr error) -->
        <!-- <column>ccm:commonlicense_key</column> -->
        <!-- currently not working (cm:name vs cclom:title) -->
        <!-- <column>cclom:title</column> -->
        <!-- <column>ccm:replicationsource</column> -->
      </columns>
    </sort>
    <sort>
      <id>collections</id>
      <default>
        <sortBy>cm:modified</sortBy>
        <sortAscending>false</sortAscending>
      </default>
    </sort>
  </sorts>
  <lists>
    <list>
      <id>search</id>
      <columns>
        <column>cclom:title</column>
        <column>cm:modified</column>
        <column>ccm:commonlicense_key</column>
        <column>ccm:replicationsource</column>
      </columns>
    </list>
    <list>
      <id>searchCollections</id>
      <columns>
        <column>COLLECTION.title</column>
        <column>COLLECTION.info</column>
        <column>COLLECTION.scope</column>
      </columns>
    </list>
    <list>
      <id>collectionReferences</id>
      <columns>
        <column>cclom:title</column>
        <column>cm:modified</column>
        <column>ccm:commonlicense_key</column>
        <column>ccm:replicationsource</column>
      </columns>
    </list>
    <list>
      <id>mediacenterManaged</id>
      <columns>
        <column>cclom:title</column>
        <column>ccm:replicationsourceid</column>
        <column>ccm:replicationsource</column>
      </columns>
    </list>
    <list>
      <id>mediacenterGroups</id>
      <columns>
        <column>displayName</column>
        <column>groupType</column>
      </columns>
    </list>
    <list>
      <id>relationNodes</id>
      <columns>
        <column>cclom:title</column>
        <column>cm:creator</column>
        <column>cm:created</column>
      </columns>
    </list>
  </lists>
  <queries>
    <basequery>-TYPE:"ccm:toolpermission" AND NOT ASPECT:"ccm:metadataPresettingTemplate" AND NOT @cm\:name:"._*" AND
      NOT @cm\:name:".DS_Store*" AND NOT PATH:"/sys\:system/sys\:people//*" AND NOT
      PATH:"/app:company_home/ccm:Edu_Sharing_System/*" AND -ASPECT:"ccm:io_childobject"
    </basequery>
    <allowSearchWithoutCriteria>true</allowSearchWithoutCriteria>

    <query join="AND" id="ngsearch">
      <basequery>ISNULL:@ccm\:tool_category</basequery>
      <property name="ngsearchword">
        <statement>(@sys\:node-uuid:"${value}" OR TEXT:"${value}" OR @cm\:name:"*${value}*" OR
          @cclom\:title:"*${value}*" OR @cclom\:general_description:"*${value}*" OR @cclom\:general_keyword:"*${value}*"
          OR @ccm\:taxonentry:"*${value}*" OR @ccm\:classification_keyword:"*${value}*" OR
          @ccm\:educationallearningresourcetype:"*${value}*" OR @ccm\:educationalcontext:"*${value}*" OR
          @ccm\:learninggoal:"*${value}*" OR @ccm\:guidanceteachers:"*${value}*" OR @ccm\:guidancestudents:"*${value}*")
        </statement>
        <exactMatching>false</exactMatching>
        <multiple>true</multiple>
        <multiplejoin>AND</multiplejoin>
      </property>
      <property name="cclom:general_keyword">
        <statement>@cclom\:general_keyword:"${value}"</statement>
        <multiple>true</multiple>
        <multiplejoin>AND</multiplejoin>
      </property>
      <property name="ccm:classification_purpose"/>
      <property name="ccm:commonlicense_key"/>
      <property name="ccm:educationallearningresourcetype">
        <statement>@ccm\:educationallearningresourcetype:"${value}"</statement>
        <multiple>true</multiple>
        <multiplejoin>OR</multiplejoin>
      </property>
      <property name="license">
        <statement>@ccm\:commonlicense_key:"${value}"</statement>
        <statement value="OPEN">@ccm\:commonlicense_key:"CC_0" OR @ccm\:commonlicense_key:"PDM"</statement>
        <statement value="OER">@ccm\:commonlicense_key:"CC_0" OR @ccm\:commonlicense_key:"PDM" OR
          @ccm\:commonlicense_key:"CC_BY" OR @ccm\:commonlicense_key:"CC_BY_SA"
        </statement>
        <statement value="CC_BY_OPEN">@ccm\:commonlicense_key:"CC_BY" OR @ccm\:commonlicense_key:"CC_BY_SA"</statement>
        <statement value="CC_BY_RESTRICTED">@ccm\:commonlicense_key:"CC_BY_ND" OR @ccm\:commonlicense_key:"CC_BY_NC" OR
          @ccm\:commonlicense_key:"CC_BY_NC_SA" OR @ccm\:commonlicense_key:"CC_BY_NC_ND"
        </statement>
        <statement value="CC_BY_ALL">@ccm\:commonlicense_key:"CC_0" OR @ccm\:commonlicense_key:"CC_BY*"</statement>
        <statement value="COPYRIGHT_OTHERS">@ccm\:commonlicense_key:"COPYRIGHT*" OR
          @ccm\:commonlicense_key:"SCHULFUNK"
        </statement>
        <multiple>true</multiple>
        <multiplejoin>OR</multiplejoin>
      </property>
      <property name="workflow">
        <statement>@ccm\:wf_status:"${value}"</statement>
        <statement value="100_unchecked">@ccm\:wf_status:"${value}" or ISNULL:@ccm\:wf_status</statement>
        <multiple>true</multiple>
        <multiplejoin>OR</multiplejoin>
      </property>
      <property name="virtual:reurlTypes">
        <statement>@cclom\:format:"${value}*"</statement>
        <multiple>true</multiple>
        <multiplejoin>OR</multiplejoin>
      </property>
    </query>
    <query join="AND" id="sharedToMe">
      <basequery>(TYPE:"ccm:io" OR TYPE:"ccm:map") AND NOT ASPECT:"ccm:collection_io_reference" AND NOT
        ASPECT:"ccm:collection"
      </basequery>
    </query>
    <query join="AND" id="sharedByMe">
      <basequery>(TYPE:"ccm:io" OR TYPE:"ccm:map") AND NOT ASPECT:"ccm:collection_io_reference" AND NOT
        ASPECT:"ccm:collection"
      </basequery>
    </query>
    <query join="AND" id="mediacenter_filter">
      <basequery>TYPE:"ccm:io"</basequery>
      <property name="ngsearchword">
        <statement>(@cm\:name:"*${value}*" OR @ccm\:replicationsourceid:"*${value}*")</statement>
        <exactMatching>false</exactMatching>
        <multiple>true</multiple>
        <multiplejoin>AND</multiplejoin>
      </property>
    </query>
    <query join="AND" id="oai">
      <basequery>ISNULL:@ccm\:tool_category</basequery>
      <property name="from">
        <statement>@cm\:modified:[${value} TO MAX]</statement>
      </property>
      <property name="until">
        <statement>@cm\:modified:[MIN TO ${value}]</statement>
      </property>
    </query>
    <query join="AND" id="collections">
      <basequery>ASPECT:"ccm:collection"</basequery>
      <basequery propertyNull="ngsearchword">ASPECT:"ccm:collection" AND (@ccm\:collectionlevel0:true OR
        @ccm\:collection_pinned_status:true)
      </basequery>
      <property name="ngsearchword">
        <statement>(@sys\:node-uuid:"${value}" OR @cm\:name:"*${value}*" OR @cclom\:title:"*${value}*" OR
          @cclom\:general_description:"*${value}*" OR @cclom\:general_keyword:"*${value}*" OR
          @ccm\:taxonentry:"*${value}*" OR @ccm\:classification_keyword:"*${value}*" OR
          @ccm\:educationallearningresourcetype:"*${value}*" OR @ccm\:educationalcontext:"*${value}*" OR
          @ccm\:learninggoal:"*${value}*" OR @ccm\:guidanceteachers:"*${value}*" OR @ccm\:guidancestudents:"*${value}*")
        </statement>
        <exactMatching>false</exactMatching>
        <multiple>true</multiple>
        <multiplejoin>AND</multiplejoin>
      </property>
    </query>
    <query join="AND" id="collections_scope_my">
      <basequery>ASPECT:"ccm:collection" AND @ccm\:collectionlevel0:true AND OWNER:"${authority}"</basequery>
    </query>
    <query join="AND" id="collections_scope_shared">
      <basequery>ASPECT:"ccm:collection" AND @ccm\:collectionlevel0:true AND NOT OWNER:"${authority}" AND NOT
        @ccm\:collectiontype:"EDITORIAL" AND NOT @ccm\:collectiontype:"MEDIA_CENTER"
      </basequery>
    </query>
    <query join="AND" id="collections_scope_editorial">
      <basequery>ASPECT:"ccm:collection" AND @ccm\:collectionlevel0:true AND @ccm\:collectiontype:"EDITORIAL"
      </basequery>
    </query>
    <query join="AND" id="collections_scope_media_center">
      <basequery>ASPECT:"ccm:collection" AND @ccm\:collectionlevel0:true AND @ccm\:collectiontype:"MEDIA_CENTER"
      </basequery>
    </query>
    <query join="AND" id="collections_scope_public">
      <basequery>ASPECT:"ccm:collection" AND @ccm\:collectionlevel0:true AND NOT @ccm\:collectiontype:"EDITORIAL" AND
        NOT @ccm\:collectiontype:"MEDIA_CENTER"
      </basequery>
    </query>
    <query join="AND" id="archive" applyBasequery="false">
      <basequery>ASPECT:"sys:archived"</basequery>
      <property name="ngsearchword">
        <statement>@cm\:name:"${value}"</statement>
      </property>
      <property name="user">
        <statement>@sys\:archivedBy:"${value}"</statement>
      </property>
    </query>
    <query join="AND" id="saved_search" applyBasequery="false">
      <basequery>TYPE:"ccm:saved_search"</basequery>
      <property name="ngsearchword">
        <statement>(@cm\:name:"*${value}*" OR @cclom\:title:"*${value}*")</statement>
      </property>
    </query>
    <query join="AND" id="tools">
      <basequery>ASPECT:"{http://www.campuscontent.de/model/1.0}tool_definition"</basequery>
      <property name="toolname">
        <statement>(@sys\:node-uuid:"${value}" OR TEXT:"${value}" OR @cm\:name:"*${value}*" OR
          @cclom\:title:"*${value}*" OR @cclom\:general_description:"*${value}*" OR @cclom\:general_keyword:"*${value}*"
          OR @ccm\:taxonentry:"*${value}*" OR @ccm\:classification_keyword:"*${value}*" OR
          @ccm\:educationallearningresourcetype:"*${value}*" OR @ccm\:educationalcontext:"*${value}*" OR
          @ccm\:learninggoal:"*${value}*" OR @ccm\:guidanceteachers:"*${value}*" OR @ccm\:guidancestudents:"*${value}*")
        </statement>
        <multiple>true</multiple>
        <multiplejoin>AND</multiplejoin>
      </property>
    </query>
    <query join="AND" id="tool_instances">
      <basequery>TYPE:"ccm:tool_instance"</basequery>
      <property name="url">
        <statement>@ccm\:tool_instance_provider_url:"*${value}*"</statement>
      </property>
    </query>
    <query join="AND" id="workspace">
      <property name="ngsearchword">
        <statement>NOT TYPE:"ccm:notify" AND NOT ASPECT:"ccm:collection_io_reference" AND (@sys\:node-uuid:"${value}" OR
          TEXT:"${value}" OR @cm\:name:"*${value}*" OR @cclom\:title:"*${value}*" OR
          @cclom\:general_description:"*${value}*" OR @cclom\:general_keyword:"*${value}*" OR
          @ccm\:taxonentry:"*${value}*" OR @ccm\:classification_keyword:"*${value}*" OR
          @ccm\:educationallearningresourcetype:"*${value}*" OR @ccm\:educationalcontext:"*${value}*" OR
          @ccm\:learninggoal:"*${value}*" OR @ccm\:guidanceteachers:"*${value}*" OR @ccm\:guidancestudents:"*${value}*")
        </statement>
        <multiple>true</multiple>
        <multiplejoin>AND</multiplejoin>
      </property>
      <property name="parent">
        <statement>PATH:"${value}//*"</statement>
        <preprocessor>node_path</preprocessor>
        <mandatory>false</mandatory>
      </property>
    </query>
    <query join="AND" id="search_relation_query">
      <basequery>TYPE:"ccm:io" AND NOT ASPECT:"ccm:collection_io_reference"</basequery>
      <property name="ngsearchword">
        <statement>(@sys\:node-uuid:"${value}" OR TEXT:"${value}" OR @cm\:name:"*${value}*" OR
          @cclom\:title:"*${value}*" OR @cclom\:general_description:"*${value}*" OR
          @cclom\:general_keyword:"*${value}*")
        </statement>
        <multiple>true</multiple>
        <multiplejoin>AND</multiplejoin>
      </property>
      <property name="sourceNode">
        <statement>TYPE:"ccm:io" AND NOT @sys\:node-uuid:"${value}" AND NOT @ccm\:published_original:"${value}"
        </statement>
      </property>
      <property name="ccm:taxonid">
        <multiple>true</multiple>
        <multiplejoin>OR</multiplejoin>
      </property>
      <property name="virtual:user_files">
        <statement value="false">TYPE:"ccm:io"</statement>
        <statement value="true">CREATOR:"${authority}" OR OWNER:"${authority}"</statement>
      </property>
    </query>
  </queries>

  <!-- elastic -->
  <queries syntax="dsl">
    <basequery>
      {"bool":
      {"must":[
      {"term":{"nodeRef.storeRef.protocol":"workspace"}}
      ]
      }}
    </basequery>
    <allowSearchWithoutCriteria>true</allowSearchWithoutCriteria>
    <query join="AND" id="sharedToMe">
      <basequery>
        {"bool":{
        "should":[
        {"match":{"type":"ccm:io"}},
        {"match":{"type":"ccm:map"}}
        ],
        "minimum_should_match": 1,
        "must_not":[
        {"match":{"aspects":"ccm:collection_io_reference"}},
        {"match":{"aspects":"ccm:collection"}}
        ]
        }}
      </basequery>
    </query>
    <query join="AND" id="sharedByMe">
      <basequery>{"bool":{
        "should":[
        {"match":{"type":"ccm:io"}},
        {"match":{"type":"ccm:map"}}
        ],
        "minimum_should_match": 1,
        "must_not":[
        {"match":{"aspects":"ccm:collection_io_reference"}},
        {"match":{"aspects":"ccm:collection"}}
        ]
        }}
      </basequery>
    </query>
    <query join="AND" id="workspace">
      <property name="ngsearchword">
        <statement>
          {"bool": {
          "must_not": [
          {"match":{"type":"ccm:notify"}},
          {"match":{"aspects":"ccm:collection_io_reference"}}
          ],
          "should":[
          {"wildcard":{"nodeRef.id": {"value": "${value}", "case_insensitive": true}}},
          {"wildcard":{"content.fulltext": {"value": "${value}", "case_insensitive": true}}},
          {"wildcard":{"properties.cm:name.keyword": {"value": "*${value}*", "case_insensitive": true}}},
          {"wildcard":{"properties.cclom:title.keyword": {"value": "*${value}*", "case_insensitive": true}}},
          {"wildcard":{"properties.cclom:general_description.keyword": {"value": "*${value}*", "case_insensitive": true}}},
          {"wildcard":{"properties.cclom:general_keyword.keyword": {"value": "*${value}*", "case_insensitive": true}}},
          {"wildcard":{"properties.ccm:learninggoal.keyword": {"value": "*${value}*", "case_insensitive": true}}},
          {"wildcard":{"properties.ccm:guidanceteachers.keyword": {"value": "*${value}*", "case_insensitive": true}}},
          {"wildcard":{"properties.ccm:guidancestudents.keyword": {"value": "*${value}*", "case_insensitive": true}}},
          {"wildcard":{"i18n.de_DE.ccm:educationallearningresourcetype": {"value": "*${value}*", "case_insensitive": true}}},
          {"wildcard":{"i18n.de_DE.ccm:educationalcontext": {"value": "*${value}*", "case_insensitive": true}}}
          ],
          "minimum_should_match": 1
          }}
        </statement>
        <multiple>true</multiple>
        <multiplejoin>AND</multiplejoin>
      </property>
      <property name="parent">
        <statement>{"wildcard":{"fullpath":"${valueRaw}*"}}</statement>
        <preprocessor>node_path</preprocessor>
        <mandatory>false</mandatory>
      </property>
    </query>
    <query join="AND" id="collections">
      <basequery propertyNull="ngsearchword">
        {"bool":{
        "must":[
        {"term":{"aspects":"ccm:collection"}},{"term":{"nodeRef.storeRef.protocol":"workspace"}},
        {"bool":{
        "should":[
        {"term":{"properties.ccm:collectionlevel0.keyword":"true"}},
        {"term":{"properties.ccm:collection_pinned_status":"true"}}
        ]
        }}]
        }}
      </basequery>
      <basequery>{"bool":{
        "must":[
        {"term":{"type":"ccm:map"}},{"term":{"aspects":"ccm:collection"}}
        ]
        }}
      </basequery>
      <property name="ngsearchword" asFilter="false">
        <statement>
          {"bool":{"should":[
          {
          "simple_query_string": {
          "query": "${valueRaw}*",
          "flags": "OR|AND|PREFIX|PHRASE|WHITESPACE",
          "fields": [
          "properties.cm:name^2",
          "properties.cm:title^2",
          "properties.cclom:title^5",
          "properties.cclom:general_description^2",
          "properties.cclom:general_keyword^4",
          "i18n.de_DE.ccm:taxonid^2"
          ],
          "default_operator": "and"
          }
          },
          {"wildcard":{"nodeRef.id": {"value":"*${value}*", "case_insensitive": true }}}
          ]
          }}
        </statement>
      </property>
    </query>
    <query join="AND" id="ngsearch">
      <!--TODO basequery-->
      <!--basequery>ISNULL:@ccm\:tool_category</basequery-->
      <basequery>{"bool":{
        "must":[
        {"term":{"type":"ccm:io"}},
        {"term":{"nodeRef.storeRef.protocol":"workspace"}}
        ],
        "must_not":[
        {"term":{"aspects":"ccm:metadataPresettingTemplate"}},
        {"term":{"aspects":"ccm:io_childobject"}},
        {"wildcard":{"properties.cm:name.keyword":"._*"}},
        {"term":{"aspects":"ccm:collection_io_reference"}},
        {"wildcard":{"properties.cm:name.keyword":".DS_Store*"}},
        {"term":{"aspects":"ccm:mediacenter_statistics"}}
        ]
        }}
      </basequery>
      <specialFilter>exclude_system_folder</specialFilter>
      <specialFilter>exclude_sites_folder</specialFilter>
      <specialFilter>exclude_people_folder</specialFilter>
      <property name="ngsearchword" asFilter="false">
        <basequery>
          {"bool": {
          "must_not":[
          {"term":{"aspects":"ccm:metadataPresettingTemplate"}},
          {"term":{"aspects":"ccm:io_childobject"}},
          {"wildcard":{"properties.cm:name.keyword":"._*"}},
          {"term":{"aspects":"ccm:collection_io_reference"}},
          {"wildcard":{"properties.cm:name.keyword":".DS_Store*"}}
          ]
          }
          }
        </basequery>
        <statement>
          {"bool":{"should":[
          {
          "simple_query_string": {
          "query": "${valueRaw}*",
          "flags": "OR|AND|PREFIX|PHRASE|WHITESPACE",
          "fields": [
          "properties.cm:name^2",
          "properties.cm:title^2",
          "properties.cclom:title^5",
          "properties.cclom:general_description^2",
          "properties.cclom:general_keyword^4",
          "properties.ccm:lifecyclecontributer_author^1",
          "properties.ccm:lifecyclecontributer_publisher^1",
          "properties.ccm:publisher^1",
          "i18n.de_DE.ccm:taxonid^2",
          "content.fulltext^1"
          ],
          "default_operator": "and"
          }
          },
          {"wildcard":{"nodeRef.id": {"value":"*${value}*", "case_insensitive": true }}}
          ]
          }}
        </statement>
        <exactMatching>false</exactMatching>
        <multiple>true</multiple>
        <multiplejoin>AND</multiplejoin>
      </property>
      <property name="cclom:general_keyword">
        <multiple>true</multiple>
        <multiplejoin>AND</multiplejoin>
      </property>
      <property name="ccm:classification_purpose"/>
      <property name="ccm:commonlicense_key"/>
      <property name="ccm:educationallearningresourcetype">
        <multiple>true</multiple>
        <multiplejoin>OR</multiplejoin>
      </property>
      <property name="license">
        <statement>{"wildcard":{"properties.ccm:commonlicense_key":{"value":"${value}"}}}</statement>
        <statement value="OPEN">
          {"bool":{"should":[{"wildcard":{"properties.ccm:commonlicense_key.keyword":{"value":"CC_0"}}},{"wildcard":{"properties.ccm:commonlicense_key.keyword":{"value":"PDM"}}}]}}
        </statement>
        <statement value="OER">
          {"bool":{"should":[{"wildcard":{"properties.ccm:commonlicense_key.keyword":{"value":"CC_0"}}},{"wildcard":{"properties.ccm:commonlicense_key.keyword":{"value":"PDM"}}},{"wildcard":{"properties.ccm:commonlicense_key":{"value":"CC_BY"}}},{"wildcard":{"properties.ccm:commonlicense_key.keyword":{"value":"CC_BY_SA"}}}]}}
        </statement>
        <statement value="CC_BY_OPEN">
          {"bool":{"should":[{"wildcard":{"properties.ccm:commonlicense_key.keyword":{"value":"CC_BY"}}},{"wildcard":{"properties.ccm:commonlicense_key.keyword":{"value":"CC_BY_SA"}}}]}}
        </statement>
        <statement value="CC_BY_RESTRICTED">
          {"bool":{"should":[{"wildcard":{"properties.ccm:commonlicense_key.keyword":{"value":"CC_BY_ND"}}},{"wildcard":{"properties.ccm:commonlicense_key.keyword":{"value":"CC_BY_NC"}}},{"wildcard":{"properties.ccm:commonlicense_key.keyword":{"value":"CC_BY_NC_SA"}}},{"wildcard":{"properties.ccm:commonlicense_key.keyword":{"value":"CC_BY_NC_ND"}}}]}}
        </statement>
        <statement value="CC_BY_ALL">
          {"bool":{"should":[{"wildcard":{"properties.ccm:commonlicense_key.keyword":{"value":"CC_0"}}},{"wildcard":{"properties.ccm:commonlicense_key.keyword":{"value":"CC_BY*"}}}]}}
        </statement>
        <statement value="COPYRIGHT_OTHERS">
          {"bool":{"should":[{"wildcard":{"properties.ccm:commonlicense_key.keyword":{"value":"COPYRIGHT*"}}},{"wildcard":{"properties.ccm:commonlicense_key.keyword":{"value":"SCHULFUNK"}}}]}}
        </statement>
        <multiple>true</multiple>
        <multiplejoin>OR</multiplejoin>
      </property>
      <property name="workflow">
        <statement>@ccm\:wf_status:"${value}"</statement>
        <statement value="100_unchecked">@ccm\:wf_status:"${value}" or ISNULL:@ccm\:wf_status</statement>
        <multiple>true</multiple>
        <multiplejoin>OR</multiplejoin>
      </property>
      <property name="virtual:reurlTypes">
        <statement>{"wildcard": {"properties.cclom:format": "${valueRaw}*" }}</statement>
        <multiple>true</multiple>
        <multiplejoin>OR</multiplejoin>
      </property>
    </query>
    <query join="AND" id="mediacenter_filter">
      <basequery>{"term":{"type":"ccm:io"}}</basequery>
      <specialFilter>exclude_system_folder</specialFilter>
      <specialFilter>exclude_sites_folder</specialFilter>
      <specialFilter>exclude_people_folder</specialFilter>
      <property name="ngsearchword">
        <statement>{"bool":{"should":[
          {"wildcard":{"properties.cm:name.keyword":{"value":"*${value}*"}}},
          {"wildcard":{"properties.cclom:title":{"value":"*${value}*"}}},
          {"wildcard":{"properties.ccm:replicationsourceid.keyword":{"value":"*${value}*"}}}
          ],
          "must_not":[
          {"term":{"aspects":"ccm:mediacenter_statistics"}}
          ]}}
        </statement>
      </property>
    </query>
    <query join="AND" id="mediacenter_statistics">
      <basequery>
        {"bool":{"must":[
        {"term":{"type":"ccm:io"}},
        {"term":{"aspects":"ccm:mediacenter_statistics"}}
        ]}}
      </basequery>
      <property name="mediacenter" asFilter="false">
        <statement>{"term":{"properties.ccm:mediacenterId.keyword": "${valueRaw}"}}</statement>
      </property>
    </query>
    <query join="AND" id="search_relation_query">
      <basequery>{"term":{"type":"ccm:io"}}</basequery>
      <specialFilter>exclude_system_folder</specialFilter>
      <specialFilter>exclude_sites_folder</specialFilter>
      <specialFilter>exclude_people_folder</specialFilter>
      <property name="ngsearchword" asFilter="false">
        <statement>
          {
          "simple_query_string" : {
          "query": "${value}*",
          "fields": [
          "properties.cm:name^4",
          "properties.cclom:title^4",
          "properties.cclom:general_description^2",
          "properties.cclom:general_keyword^2",
          "content.fulltext",
          "nodeRef.id",
          "i18n.de_DE.ccm:taxonid^3",
          "i18n.de_DE.ccm:educationallearningresourcetype^3",
          "i18n.de_DE.ccm:educationalcontext^3",
          "i18n.de_DE.ccm:educationalintendedenduserrole^3"
          ],
          "default_operator": "and"
          }}
        </statement>
        <exactMatching>false</exactMatching>
        <multiple>true</multiple>
        <multiplejoin>AND</multiplejoin>
      </property>
      <property name="sourceNode">
        <statement>{"bool": {
          "must_not": [
          {"match": {"nodeRef.id": "${valueRaw}"}},
          {"wildcard": {"properties.ccm:published_original.keyword": "*${valueRaw}"}}
          ]}}
        </statement>
      </property>
      <property name="ccm:taxonid">
        <multiple>true</multiple>
        <multiplejoin>OR</multiplejoin>
      </property>
      <property name="virtual:user_files">
        <statement value="false">{"term":{"type":"ccm:io"}}</statement>
        <statement value="true">{"bool": {
          "should": [
          {"match": {"properties.cm:creator.keyword": "${authority}"}},
          {"match": {"owner": "${authority}"}}
          ]
          }}
        </statement>
      </property>
    </query>
  </queries>
</metadataset>
